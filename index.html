<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ğŸ 2025 ì˜¤ì‚¬ì¹´ Â· êµí†  ì—¬í–‰</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
  <style>
    /* ------------------------------------- */
    /* -------------- ğŸ¨ CSS -------------- */
    /* ------------------------------------- */
    @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&family=Noto+Serif+JP:wght@300;400;500;700&display=swap');

    :root {
      /* Light Mode Colors */
      --primary-color: #d40d12;
      --secondary-color: #f0b62e;
      --accent-color: #7d572e;
      --background-light: #f8f2e2;
      --background-extra-light: #fff;
      --text-dark: #2d2d2d;
      --text-medium: #555555;
      --card-shadow: 0 12px 30px rgba(0,0,0,0.08);
      --border-color: rgba(125,87,46,0.15);
      --note-bg: #fdf5e6;
      --add-btn-bg: rgba(255, 255, 255, 0.5);
      --progress-bg: #eee;
    }

    .dark-mode {
      /* Dark Mode Colors */
      --primary-color: #ff5555;
      --secondary-color: #ffda73;
      --accent-color: #a0815a;
      --background-light: #2b2b2b;
      --background-extra-light: #1c1c1c;
      --text-dark: #f0f0f0;
      --text-medium: #b0b0b0;
      --card-shadow: 0 12px 30px rgba(0,0,0,0.3);
      --border-color: rgba(255, 255, 255, 0.1);
      --note-bg: #3c3c3c;
      --add-btn-bg: rgba(0, 0, 0, 0.3);
      --progress-bg: #444;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Noto Sans KR', sans-serif;
      background: var(--background-light);
      background-attachment: fixed;
      min-height: 100vh;
      color: var(--text-dark);
      position: relative;
      transition: background-color 0.5s ease, color 0.5s ease;
    }

    /* Background Animation */
    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: var(--background-extra-light);
      background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path d="M50 5 L60 25 L85 20 L70 40 L95 50 L75 60 L80 85 L60 70 L50 95 L40 70 L15 85 L30 60 L5 50 L25 40 L10 20 L40 25 Z" fill="rgba(212,13,18,0.05)"/></svg>') repeat;
      pointer-events: none;
      z-index: -1;
      opacity: 0.1;
      transition: opacity 0.5s ease;
    }
    
    .dark-mode::before {
      opacity: 0.05;
      background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path d="M50 5 L60 25 L85 20 L70 40 L95 50 L75 60 L80 85 L60 70 L50 95 L40 70 L15 85 L30 60 L5 50 L25 40 L10 20 L40 25 Z" fill="rgba(255,255,255,0.05)"/></svg>') repeat;
    }

    .travel-header {
      background: var(--background-extra-light);
      backdrop-filter: blur(24px);
      border-bottom: 2px solid var(--secondary-color);
      padding: 2rem 1rem;
      text-align: center;
      position: sticky;
      top: 0;
      z-index: 100;
      box-shadow: 0 8px 20px rgba(0,0,0,0.1);
      border-radius: 0 0 24px 24px;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      transition: background-color 0.5s ease, box-shadow 0.5s ease;
    }
    
    .dark-mode .travel-header {
      background: var(--background-extra-light);
    }
    
    .mode-toggle {
      position: absolute;
      top: 1rem;
      right: 1rem;
      background: none;
      border: none;
      font-size: 1.5rem;
      color: var(--text-dark);
      cursor: pointer;
      transition: transform 0.3s ease, color 0.3s ease;
      z-index: 101;
    }

    .mode-toggle:hover {
      transform: scale(1.1);
    }

    .travel-title {
      font-size: 2.2rem;
      font-weight: 700;
      font-family: 'Noto Serif JP', serif;
      background: linear-gradient(135deg, var(--secondary-color), var(--primary-color));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      text-shadow: 1px 1px 2px rgba(212,13,18,0.25);
      animation: fadeInFromTop 1s ease-out;
    }

    .travel-subtitle {
      color: var(--text-medium);
      font-size: 1rem;
      font-weight: 300;
      margin-top: 0.5rem;
      animation: fadeInFromTop 1.2s ease-out;
    }

    .container {
      max-width: 900px;
      margin: 0 auto;
      padding: 2rem 1rem;
      position: relative;
      z-index: 2;
    }

    .day-card {
      background: var(--background-extra-light);
      border-radius: 28px;
      margin-bottom: 2rem;
      box-shadow: var(--card-shadow);
      border: 1px solid var(--border-color);
      transition: transform 0.4s ease, background-color 0.5s ease;
      animation: fadeInFromBottom 1s ease-out;
    }
    
    .dark-mode .day-card {
      background: var(--background-light);
    }

    .day-card:hover {
      transform: translateY(-5px);
    }

    .day-header {
      background: linear-gradient(135deg, var(--secondary-color), var(--primary-color));
      color: white;
      padding: 1.8rem 1.5rem;
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-radius: 28px 28px 0 0;
      position: relative;
      overflow: hidden;
      transition: background 0.4s ease;
    }

    .day-header:hover {
      background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
    }

    .day-title {
      font-size: 1.3rem;
      font-weight: 500;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .day-subtitle {
      color: rgba(255, 255, 255, 0.85);
      font-size: 0.9rem;
      font-weight: 300;
      margin-top: 0.25rem;
    }

    .day-toggle {
      font-size: 1.3rem;
      transition: transform 0.4s ease;
    }

    .day-toggle.rotated {
      transform: rotate(180deg);
    }

    .day-content {
      padding: 0;
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.5s ease, padding 0.5s ease;
    }

    .day-content.expanded {
      max-height: 3000px;
      padding: 1.5rem;
    }

    .time-item {
      display: flex;
      align-items: flex-start;
      gap: 1rem;
      padding: 1rem;
      margin-bottom: 0.8rem;
      border-radius: 24px;
      background: var(--background-light);
      border: 1px solid var(--border-color);
      transition: transform 0.3s ease, background 0.3s ease, box-shadow 0.3s ease;
      cursor: grab;
      position: relative;
    }
    
    .time-item.dragging {
      opacity: 0.5;
      transform: scale(1.05);
    }

    .time-item:hover {
      background: var(--background-light);
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }

    .dark-mode .time-item:hover {
      background: #3c3c3c;
    }

    .custom-checkbox {
      flex-shrink: 0;
      width: 26px;
      height: 26px;
      border: 2px solid var(--primary-color);
      border-radius: 50%;
      background: var(--background-extra-light);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: transform 0.3s ease, background 0.3s ease, border-color 0.3s ease;
    }

    .custom-checkbox .fa-check {
      color: var(--background-extra-light);
      font-size: 1rem;
      visibility: hidden;
      transition: visibility 0.2s ease, transform 0.3s ease;
    }

    .custom-checkbox.checked {
      background: linear-gradient(135deg, var(--secondary-color), var(--primary-color));
      border-color: var(--accent-color);
      transform: scale(1.05);
    }

    .custom-checkbox.checked .fa-check {
      visibility: visible;
      transform: scale(1);
    }

    .time-content {
      flex-grow: 1;
    }

    .time-title {
      font-weight: 700;
      font-size: 1.1rem;
      color: var(--text-dark);
      margin-bottom: 0.2rem;
    }

    .time-description {
      color: var(--text-medium);
      font-size: 0.95rem;
      line-height: 1.5;
    }

    .edit-controls {
      flex-shrink: 0;
      display: flex;
      gap: 0.5rem;
    }

    .edit-btn, .delete-btn {
      background: transparent;
      border: none;
      color: var(--text-medium);
      cursor: pointer;
      transition: color 0.3s ease, transform 0.3s ease;
    }

    .edit-btn:hover {
      color: #007bff;
      transform: scale(1.1);
    }

    .delete-btn:hover {
      color: #dc3545;
      transform: scale(1.1);
    }

    .stats-container {
      background: var(--background-extra-light);
      border-radius: 24px;
      padding: 1.5rem;
      margin-bottom: 2rem;
      box-shadow: 0 8px 20px rgba(0,0,0,0.05);
      display: flex;
      flex-direction: column;
      align-items: center;
      border: 1px solid var(--border-color);
      animation: fadeIn 1s ease-out;
      transition: background-color 0.5s ease;
    }
    
    .dark-mode .stats-container {
      background: var(--background-light);
    }

    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
      gap: 1.5rem;
      width: 100%;
    }

    .stat-item {
      text-align: center;
    }

    .stat-number {
      font-size: 2rem;
      font-weight: 700;
      color: var(--primary-color);
      transition: color 0.5s ease;
    }

    .stat-label {
      font-size: 0.9rem;
      color: var(--text-medium);
      font-weight: 500;
    }

    .progress-bar {
      width: 100%;
      height: 8px;
      background: var(--progress-bg);
      border-radius: 4px;
      overflow: hidden;
      margin-top: 1rem;
      transition: background-color 0.5s ease;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--secondary-color), var(--primary-color));
      width: 0%;
      transition: width 0.5s ease-out;
    }

    .note-section {
      background: var(--note-bg);
      border-left: 5px solid var(--primary-color);
      padding: 1rem 1.5rem;
      margin-top: 1.5rem;
      border-radius: 8px;
      line-height: 1.6;
      transition: background-color 0.5s ease;
    }

    .note-title {
      font-weight: 700;
      color: var(--primary-color);
      margin-bottom: 0.5rem;
    }

    .add-btn, .add-day-btn {
      width: 100%;
      padding: 1rem;
      border: 2px dashed var(--secondary-color);
      background: var(--add-btn-bg);
      color: var(--primary-color);
      border-radius: 20px;
      font-size: 1rem;
      font-weight: 500;
      cursor: pointer;
      transition: background 0.3s ease, border-style 0.3s ease, transform 0.3s ease;
      margin-top: 1rem;
    }

    .add-btn:hover, .add-day-btn:hover {
      background: var(--background-light);
      border-style: solid;
      transform: translateY(-2px);
    }
    
    .dark-mode .add-btn:hover, .dark-mode .add-day-btn:hover {
      background: #3c3c3c;
    }

    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(5px);
      padding-top: 60px;
      transition: backdrop-filter 0.5s ease;
    }

    .modal-content {
      background-color: var(--background-extra-light);
      margin: 5% auto;
      padding: 2rem;
      border-radius: 24px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
      width: 90%;
      max-width: 500px;
      animation: modalFadeIn 0.3s ease-out;
      transition: background-color 0.5s ease;
    }
    
    .dark-mode .modal-content {
      background: var(--background-light);
    }

    .modal-header {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--primary-color);
      margin-bottom: 1.5rem;
      transition: color 0.5s ease;
    }

    .form-group {
      margin-bottom: 1rem;
    }

    .form-group label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 500;
      color: var(--text-dark);
    }

    .form-group input, .form-group textarea {
      width: 100%;
      padding: 0.8rem;
      border: 1px solid #ddd;
      border-radius: 12px;
      font-size: 1rem;
      font-family: 'Noto Sans KR', sans-serif;
      transition: border-color 0.3s ease;
      background-color: var(--background-light);
      color: var(--text-dark);
    }
    
    .dark-mode .form-group input, .dark-mode .form-group textarea {
      background-color: #3c3c3c;
      border-color: #555;
      color: var(--text-dark);
    }

    .form-group input:focus, .form-group textarea:focus {
      outline: none;
      border-color: var(--primary-color);
    }

    .modal-buttons {
      display: flex;
      justify-content: flex-end;
      gap: 1rem;
      margin-top: 1.5rem;
    }

    .btn-cancel, .btn-save {
      padding: 0.75rem 1.5rem;
      border: none;
      border-radius: 20px;
      font-size: 1rem;
      font-weight: 500;
      cursor: pointer;
      transition: transform 0.3s ease, background-color 0.5s ease, color 0.5s ease;
    }

    .btn-cancel {
      background: #e9ecef;
      color: var(--text-medium);
    }
    
    .dark-mode .btn-cancel {
      background: #555;
      color: #ddd;
    }

    .btn-save {
      background: var(--primary-color);
      color: white;
    }

    .btn-cancel:hover, .btn-save:hover {
      transform: translateY(-2px);
    }
    
    /* Toast Message */
    .toast {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      background-color: #333;
      color: white;
      padding: 1rem 1.5rem;
      border-radius: 20px;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s ease, visibility 0.3s ease;
      z-index: 2000;
    }
    
    .toast.show {
      opacity: 1;
      visibility: visible;
    }

    /* Animations */
    @keyframes fadeInFromTop {
      from { opacity: 0; transform: translateY(-20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes fadeInFromBottom {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes modalFadeIn {
      from { opacity: 0; transform: translateY(-50px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes fadeOut {
      from { opacity: 1; transform: translateX(0); }
      to { opacity: 0; transform: translateX(-20px); }
    }
    
    /* Mobile optimization */
    @media (max-width: 768px) {
      .container {
        padding: 1rem;
      }
      .travel-title {
        font-size: 1.8rem;
      }
      .day-title {
        font-size: 1.2rem;
      }
      .time-item {
        padding: 0.8rem;
        gap: 0.8rem;
      }
      .modal-content {
        padding: 1.5rem;
      }
    }
  </style>
</head>
<body>
  <div class="travel-header">
    <button id="mode-toggle" class="mode-toggle">ğŸŒ™</button>
    <div class="travel-title">ğŸ 2025 ì˜¤ì‚¬ì¹´ Â· êµí†  ì—¬í–‰</div>
    <div class="travel-subtitle">ê¿ˆê°™ì€ ì¼ë³¸ ì—¬í–‰ì„ ê³„íší•´ë³´ì„¸ìš”</div>
  </div>

  <div class="container">
    <div class="stats-container">
      <div class="stats-grid">
        <div class="stat-item">
          <div class="stat-number" id="totalItems">0</div>
          <div class="stat-label">ì´ ì¼ì •</div>
        </div>
        <div class="stat-item">
          <div class="stat-number" id="completedItems">0</div>
          <div class="stat-label">ì™„ë£Œ</div>
        </div>
        <div class="stat-item">
          <div class="stat-number" id="progressPercent">0%</div>
          <div class="stat-label">ì§„í–‰ë¥ </div>
        </div>
        <div class="stat-item">
          <div class="stat-number" id="totalDays">4</div>
          <div class="stat-label">ì—¬í–‰ì¼</div>
        </div>
      </div>
      <div class="progress-bar">
        <div class="progress-fill"></div>
      </div>
    </div>

    <div id="dayContainer">
  <div class="day-card" data-day-id="1">
    <div class="day-header" onclick="toggleDay(this)">
      <div>
        <div class="day-title">ğŸ¯ 2025.09.09 êµí†  ì¼ì •</div>
        <div class="day-subtitle">ì¸ì²œêµ­ì œê³µí•­ âœˆï¸ â†’ ê°„ì‚¬ì´ê³µí•­ â†’ êµí†  ë¬¸í™”ìœ ì‚° íƒë°©</div>
      </div>
      <div class="day-toggle"><i class="fas fa-chevron-down"></i></div>
    </div>
    <div class="day-content">

      <div class="time-item" data-time="08:00" draggable="true">
        <div class="custom-checkbox" onclick="toggleCheck(this)"><i class="fas fa-check"></i></div>
        <div class="time-content">
          <div class="time-title">ğŸ›« 08:00 ì¸ì²œêµ­ì œê³µí•­ T2 ì¶œë°œ</div>
          <div class="time-description">ì§„ì—ì–´ í•­ê³µí¸ìœ¼ë¡œ ê°„ì‚¬ì´ ê³µí•­í–‰</div>
        </div>
      </div>

      <div class="time-item" data-time="10:00" draggable="true">
        <div class="custom-checkbox" onclick="toggleCheck(this)"><i class="fas fa-check"></i></div>
        <div class="time-content">
          <div class="time-title">âœˆï¸ 10:00 ê°„ì‚¬ì´ê³µí•­ ë„ì°©</div>
          <div class="time-description">ì…êµ­ ìˆ˜ì† í›„ ë‚œì¹´ì´ ì „ì²  or JR ì´ìš© â†’ ì˜¤ì‚¬ì¹´ ê²½ìœ  ìˆ™ì†Œ ì´ë™</div>
        </div>
      </div>

      <div class="time-item" data-time="11:30" draggable="true">
        <div class="custom-checkbox" onclick="toggleCheck(this)"><i class="fas fa-check"></i></div>
        <div class="time-content">
          <div class="time-title">ğŸ¨ 11:30 ìˆ™ì†Œ ë„ì°©</div>
          <div class="time-description">Tanimachikun Hoshi Hotel Kujo 27 â†’ ì§ë§Œ ë§¡ê¸°ê³  êµí†  ì¶œë°œ</div>
        </div>
      </div>

      <div class="time-item" data-time="12:00" draggable="true">
        <div class="custom-checkbox" onclick="toggleCheck(this)"><i class="fas fa-check"></i></div>
        <div class="time-content">
          <div class="time-title">ğŸœ 12:00~13:00 êµí† ì—­ ì ì‹¬</div>
          <div class="time-description">ë¼ë©˜ ì½”ì§€ â†’ ì¼ë³¸ ê°ì§€ ë¼ë©˜ ë§›ë³´ê¸°</div>
        </div>
      </div>

      <div class="time-item" data-time="13:20" draggable="true">
        <div class="custom-checkbox" onclick="toggleCheck(this)"><i class="fas fa-check"></i></div>
        <div class="time-content">
          <div class="time-title">â›©ï¸ 13:20~14:20 í›„ì‹œë¯¸ ì´ë‚˜ë¦¬ ì‹ ì‚¬</div>
          <div class="time-description">ì²œ ê°œì˜ ë¶‰ì€ í† ë¦¬ì´, ì¸ìƒ í¬í† ìŠ¤íŒŸ</div>
        </div>
      </div>

      <div class="time-item" data-time="14:40" draggable="true">
        <div class="custom-checkbox" onclick="toggleCheck(this)"><i class="fas fa-check"></i></div>
        <div class="time-content">
          <div class="time-title">ğŸ¯ 14:40~15:40 ê¸°ìš”ë¯¸ì¦ˆë°ë¼</div>
          <div class="time-description">ì²­ìˆ˜ì‚¬ + ì „í†µ ê³¨ëª© ì‚°ì±…, êµí†  ì „ê²½ ê°ìƒ</div>
        </div>
      </div>

      <div class="time-item" data-time="16:00" draggable="true">
        <div class="custom-checkbox" onclick="toggleCheck(this)"><i class="fas fa-check"></i></div>
        <div class="time-content">
          <div class="time-title">ğŸŒ¸ 16:00~17:00 ê¸°ì˜¨ & ì•¼ì‚¬ì¹´ ì‹ ì‚¬</div>
          <div class="time-description">ì˜› ê±°ë¦¬ ê°ì„±, ë§ˆì´ì½” ìš´ ì¢‹ìœ¼ë©´ í¬ì°© ê°€ëŠ¥</div>
        </div>
      </div>

      <div class="time-item" data-time="17:20" draggable="true">
        <div class="custom-checkbox" onclick="toggleCheck(this)"><i class="fas fa-check"></i></div>
        <div class="time-content">
          <div class="time-title">âœ¨ 17:20~18:40 ê¸ˆê°ì‚¬</div>
          <div class="time-description">í™©ê¸ˆë¹› ì‚¬ì°°ê³¼ ì—°ëª» ë°˜ì˜, ë§ˆë²• ê°™ì€ ìˆœê°„</div>
        </div>
      </div>

      <div class="time-item" data-time="19:00" draggable="true">
        <div class="custom-checkbox" onclick="toggleCheck(this)"><i class="fas fa-check"></i></div>
        <div class="time-content">
          <div class="time-title">ğŸµ 19:00 ì €ë…ì‹ì‚¬</div>
          <div class="time-description">êµí† ì—­/ê¸°ì˜¨ ë§›ì§‘ì—ì„œ ì „í†µ ì¼ë³¸ ìš”ë¦¬</div>
        </div>
      </div>

      <div class="time-item" data-time="20:00" draggable="true">
        <div class="custom-checkbox" onclick="toggleCheck(this)"><i class="fas fa-check"></i></div>
        <div class="time-content">
          <div class="time-title">ğŸš† 20:00 ìˆ™ì†Œ ë³µê·€</div>
          <div class="time-description">JR ì‹ ì¾Œì† ì—´ì°¨ë¡œ í¸ì•ˆí•œ ê·€ê°€</div>
        </div>
      </div>

      <button class="add-btn" onclick="addTimeItem(this)"><i class="fas fa-plus"></i> ìƒˆ ì¼ì • ì¶”ê°€</button>
      <div class="note-section">
        <div class="note-title"><i class="fas fa-lightbulb"></i> ì—¬í–‰ íŒ</div>
        <div>
          êµí† ì—­ ì „ë§ëŒ€ë„ ì¶”ì²œ!<br>
          ì´ë™ ì‹œ JR ê°„ì‚¬ì´ ì™€ì´ë“œ íŒ¨ìŠ¤ or ICOCA ì¹´ë“œ ì‚¬ìš©í•˜ë©´ í¸ë¦¬í•©ë‹ˆë‹¤.
        </div>
      </div>
    </div>
  </div>
</div>


      <div class="day-card" data-day-id="2">
        <div class="day-header" onclick="toggleDay(this)">
          <div>
            <div class="day-title">ğŸ¢ 2025.09.10 USJ</div>
            <div class="day-subtitle">ì˜¤í”ˆëŸ° + ìŠˆí¼ ë‹Œí…ë„ ì›”ë“œ & ì¸ê¸° ì–´íŠ¸ë™ì…˜</div>
          </div>
          <div class="day-toggle"><i class="fas fa-chevron-down"></i></div>
        </div>
        <div class="day-content">
          <div class="time-item" data-time="08:30" draggable="true">
            <div class="custom-checkbox" onclick="toggleCheck(this)"><i class="fas fa-check"></i></div>
            <div class="time-content">
              <div class="time-title">ğŸƒâ€â™‚ï¸ 08:30 ì˜¤í”ˆëŸ° ì‹œì‘</div>
              <div class="time-description">ì •ë¬¸ì—ì„œ ë°”ë¡œ ì…ì¥ â†’ ìŠˆí¼ ë‹Œí…ë„ ì›”ë“œë¡œ ì´ë™</div>
            </div>
            <div class="edit-controls">
              <button class="edit-btn" onclick="editTimeItem(this)"><i class="fas fa-edit"></i></button>
              <button class="delete-btn" onclick="deleteTimeItem(this)"><i class="fas fa-trash"></i></button>
            </div>
          </div>
          <div class="time-item" data-time="09:00" draggable="true">
            <div class="custom-checkbox" onclick="toggleCheck(this)"><i class="fas fa-check"></i></div>
            <div class="time-content">
              <div class="time-title">ğŸŸ© ìŠˆí¼ ë‹Œí…ë„ ì›”ë“œ ì…ì¥</div>
              <div class="time-description">ë§ˆë¦¬ì˜¤ì™€ ë£¨ì´ì§€ í…Œë§ˆ ì¡´ ì²´í—˜, í¬í†  ìŠ¤íŒŸ ë°©ë¬¸</div>
            </div>
            <div class="edit-controls">
              <button class="edit-btn" onclick="editTimeItem(this)"><i class="fas fa-edit"></i></button>
              <button class="delete-btn" onclick="deleteTimeItem(this)"><i class="fas fa-trash"></i></button>
            </div>
          </div>
          <div class="time-item" data-time="09:30" draggable="true">
            <div class="custom-checkbox" onclick="toggleCheck(this)"><i class="fas fa-check"></i></div>
            <div class="time-content">
              <div class="time-title">ğŸï¸ ë§ˆë¦¬ì˜¤ ì¹´íŠ¸: ì¿ íŒŒì˜ ë„ì „ì¥</div>
              <div class="time-description">EXP4 í‹°ì¼“ ì‚¬ìš©, VR ë ˆì´ì‹± ì²´í—˜, ì»¤í”Œ ì¶”ì²œ!</div>
            </div>
            <div class="edit-controls">
              <button class="edit-btn" onclick="editTimeItem(this)"><i class="fas fa-edit"></i></button>
              <button class="delete-btn" onclick="deleteTimeItem(this)"><i class="fas fa-trash"></i></button>
            </div>
          </div>
          <div class="time-item" data-time="10:30" draggable="true">
            <div class="custom-checkbox" onclick="toggleCheck(this)"><i class="fas fa-check"></i></div>
            <div class="time-content">
              <div class="time-title">ğŸµ ë™í‚¤ì½©ì˜ í¬ë ˆì´ì§€ ë“œë¦¼ì¹´</div>
              <div class="time-description">ì§§ê³  ì¬ë¯¸ìˆëŠ” ë¡¤ëŸ¬ì½”ìŠ¤í„° ì²´í—˜, ì‚¬ì§„ ì´¬ì˜ ê°€ëŠ¥</div>
            </div>
            <div class="edit-controls">
              <button class="edit-btn" onclick="editTimeItem(this)"><i class="fas fa-edit"></i></button>
              <button class="delete-btn" onclick="deleteTimeItem(this)"><i class="fas fa-trash"></i></button>
            </div>
          </div>
          <div class="time-item" data-time="11:30" draggable="true">
            <div class="custom-checkbox" onclick="toggleCheck(this)"><i class="fas fa-check"></i></div>
            <div class="time-content">
              <div class="time-title">ğŸ¦– ë” í”Œë¼ì‰ ë‹¤ì´ë„ˆì†Œì–´</div>
              <div class="time-description">EXP4 í‹°ì¼“ ì‚¬ìš©, ìŠ¤ë¦´ ë§Œì  ë¹„í–‰ ì²´í—˜</div>
            </div>
            <div class="edit-controls">
              <button class="edit-btn" onclick="editTimeItem(this)"><i class="fas fa-edit"></i></button>
              <button class="delete-btn" onclick="deleteTimeItem(this)"><i class="fas fa-trash"></i></button>
            </div>
          </div>
          <div class="time-item" data-time="12:30" draggable="true">
            <div class="custom-checkbox" onclick="toggleCheck(this)"><i class="fas fa-check"></i></div>
            <div class="time-content">
              <div class="time-title">ğŸ´ ì ì‹¬ ì‹ì‚¬ & íœ´ì‹</div>
              <div class="time-description">USJ ë‚´ ë ˆìŠ¤í† ë‘ ì¶”ì²œ: ë©•ì‹œì¹¸, í–„ë²„ê±°, ìºì£¼ì–¼ ì¹´í˜</div>
            </div>
            <div class="edit-controls">
              <button class="edit-btn" onclick="editTimeItem(this)"><i class="fas fa-edit"></i></button>
              <button class="delete-btn" onclick="deleteTimeItem(this)"><i class="fas fa-trash"></i></button>
            </div>
          </div>
          <div class="time-item" data-time="13:30" draggable="true">
            <div class="custom-checkbox" onclick="toggleCheck(this)"><i class="fas fa-check"></i></div>
            <div class="time-content">
              <div class="time-title">ğŸ® ë‹Œí…ë„ í…Œë§ˆì¡´ ììœ  íƒë°©</div>
              <div class="time-description">ê¸°ë…í’ˆ ìƒµ, í¬í† ì¡´, ë¯¸ë‹ˆ ê²Œì„ ì²´í—˜ ê°€ëŠ¥</div>
            </div>
            <div class="edit-controls">
              <button class="edit-btn" onclick="editTimeItem(this)"><i class="fas fa-edit"></i></button>
              <button class="delete-btn" onclick="deleteTimeItem(this)"><i class="fas fa-trash"></i></button>
            </div>
          </div>
          <div class="time-item" data-time="15:30" draggable="true">
            <div class="custom-checkbox" onclick="toggleCheck(this)"><i class="fas fa-check"></i></div>
            <div class="time-content">
              <div class="time-title">ğŸ›ï¸ ê¸°ë…í’ˆ ì‡¼í•‘ & íœ´ì‹</div>
              <div class="time-description">USJ ê¸°ë…í’ˆ ìƒµ, ë‹Œí…ë„ êµ¿ì¦ˆ êµ¬ë§¤ ì¶”ì²œ</div>
            </div>
            <div class="edit-controls">
              <button class="edit-btn" onclick="editTimeItem(this)"><i class="fas fa-edit"></i></button>
              <button class="delete-btn" onclick="deleteTimeItem(this)"><i class="fas fa-trash"></i></button>
            </div>
          </div>
          <div class="time-item" data-time="17:00" draggable="true">
            <div class="custom-checkbox" onclick="toggleCheck(this)"><i class="fas fa-check"></i></div>
            <div class="time-content">
              <div class="time-title">ğŸ° í•˜ë£¨ ë§ˆë¬´ë¦¬ & í‡´ì¥</div>
              <div class="time-description">USJ ì¢…ë£Œ, ìˆ™ì†Œë¡œ ì´ë™</div>
            </div>
            <div class="edit-controls">
              <button class="edit-btn" onclick="editTimeItem(this)"><i class="fas fa-edit"></i></button>
              <button class="delete-btn" onclick="deleteTimeItem(this)"><i class="fas fa-trash"></i></button>
            </div>
          </div>
          <button class="add-btn" onclick="addTimeItem(this)"><i class="fas fa-plus"></i> ìƒˆ ì¼ì • ì¶”ê°€</button>
        </div>
      </div>

      <div class="day-card" data-day-id="3">
        <div class="day-header" onclick="toggleDay(this)">
          <div>
            <div class="day-title">ğŸ¡ 2025.09.11 ì˜¤ì‚¬ì¹´ ì£¼ìœ íŒ¨ìŠ¤</div>
            <div class="day-subtitle">ê´€ëŒì°¨ Â· ì„± Â· ì „ë§ëŒ€ ì™„ì „ ì •ë³µ</div>
          </div>
          <div class="day-toggle"><i class="fas fa-chevron-down"></i></div>
        </div>
        <div class="day-content">
          <div class="time-item" data-time="09:50" draggable="true">
            <div class="custom-checkbox" onclick="toggleCheck(this)"><i class="fas fa-check"></i></div>
            <div class="time-content">
              <div class="time-title">ğŸŒƒ 09:50 ëˆë³´ë¦¬ ë¦¬ë²„ í¬ë£¨ì¦ˆ ì˜ˆì•½</div>
              <div class="time-description">ì €ë… 20:30 ì˜ˆì•½ ì„±ê³µ! ë°¤ ë„¤ì˜¨ì‚¬ì¸ ê°ìƒ</div>
            </div>
            <div class="edit-controls">
              <button class="edit-btn" onclick="editTimeItem(this)"><i class="fas fa-edit"></i></button>
              <button class="delete-btn" onclick="deleteTimeItem(this)"><i class="fas fa-trash"></i></button>
            </div>
          </div>
          <div class="time-item" data-time="10:30" draggable="true">
            <div class="custom-checkbox" onclick="toggleCheck(this)"><i class="fas fa-check"></i></div>
            <div class="time-content">
              <div class="time-title">ğŸ¯ 10:30~11:30 ì˜¤ì‚¬ì¹´ì„±</div>
              <div class="time-description">ì›…ì¥í•œ ì „ë§ + ì£¼ìœ íŒ¨ìŠ¤ ì „ìš© ì…êµ¬ ì´ìš©</div>
            </div>
            <div class="edit-controls">
              <button class="edit-btn" onclick="editTimeItem(this)"><i class="fas fa-edit"></i></button>
              <button class="delete-btn" onclick="deleteTimeItem(this)"><i class="fas fa-trash"></i></button>
            </div>
          </div>
          <div class="time-item" data-time="12:00" draggable="true">
            <div class="custom-checkbox" onclick="toggleCheck(this)"><i class="fas fa-check"></i></div>
            <div class="time-content">
              <div class="time-title">ğŸ˜ï¸ 12:00~13:00 ì˜¤ì‚¬ì¹´ ì£¼íƒ ë°•ë¬¼ê´€</div>
              <div class="time-description">ì•„ì¹¨â†’ë°¤ ë³€í™” ì²´í—˜ + ê¸°ëª¨ë…¸ ì²´í—˜ ê°€ëŠ¥</div>
            </div>
            <div class="edit-controls">
              <button class="edit-btn" onclick="editTimeItem(this)"><i class="fas fa-edit"></i></button>
              <button class="delete-btn" onclick="deleteTimeItem(this)"><i class="fas fa-trash"></i></button>
            </div>
          </div>
          <div class="time-item" data-time="13:30" draggable="true">
            <div class="custom-checkbox" onclick="toggleCheck(this)"><i class="fas fa-check"></i></div>
            <div class="time-content">
              <div class="time-title">ğŸ¡ 13:30~14:00 í—µíŒŒì´ë¸Œ ê´€ëŒì°¨</div>
              <div class="time-description">ë¸”ë£¨íˆ¬ìŠ¤ ìŒì•… ì¬ìƒ ê°€ëŠ¥ â†’ ì»¤í”Œ ê°•ë ¥ ì¶”ì²œ!</div>
            </div>
            <div class="edit-controls">
              <button class="edit-btn" onclick="editTimeItem(this)"><i class="fas fa-edit"></i></button>
              <button class="delete-btn" onclick="deleteTimeItem(this)"><i class="fas fa-trash"></i></button>
            </div>
          </div>
          <div class="time-item" data-time="14:30" draggable="true">
            <div class="custom-checkbox" onclick="toggleCheck(this)"><i class="fas fa-check"></i></div>
            <div class="time-content">
              <div class="time-title">ğŸŒ† 14:30~15:00 ê³µì¤‘ì •ì› ì „ë§ëŒ€</div>
              <div class="time-description">ë‹¤ë¥¸ ì „ë§ëŒ€ ë‹¤ë…€ì™”ë‹¤ë©´ ìƒëµ ê°€ëŠ¥</div>
            </div>
            <div class="edit-controls">
              <button class="edit-btn" onclick="editTimeItem(this)"><i class="fas fa-edit"></i></button>
              <button class="delete-btn" onclick="deleteTimeItem(this)"><i class="fas fa-trash"></i></button>
            </div>
          </div>
          <div class="time-item" data-time="15:40" draggable="true">
            <div class="custom-checkbox" onclick="toggleCheck(this)"><i class="fas fa-check"></i></div>
            <div class="time-content">
              <div class="time-title">ğŸ¡ 15:40 ë´í¬ì” ëŒ€ê´€ëŒì°¨</div>
              <div class="time-description">ë‚®ì´ë¼ ê°í¥ ì ì„ ìˆ˜ ìˆìŒ â†’ ë°¤ ì‹œê°„ ì¶”ì²œ</div>
            </div>
            <div class="edit-controls">
              <button class="edit-btn" onclick="editTimeItem(this)"><i class="fas fa-edit"></i></button>
              <button class="delete-btn" onclick="deleteTimeItem(this)"><i class="fas fa-trash"></i></button>
            </div>
          </div>
          <div class="time-item" data-time="16:00" draggable="true">
            <div class="custom-checkbox" onclick="toggleCheck(this)"><i class="fas fa-check"></i></div>
            <div class="time-content">
              <div class="time-title">ğŸš¢ 16:00 ì‚°íƒ€ë§ˆë¦¬ì•„í˜¸</div>
              <div class="time-description">í•­êµ¬ í¬ë£¨ì¦ˆ, í‹°ì¼“ ìœ„ì¹˜ ë¯¸ë¦¬ í™•ì¸ í•„ìš”</div>
            </div>
            <div class="edit-controls">
              <button class="edit-btn" onclick="editTimeItem(this)"><i class="fas fa-edit"></i></button>
              <button class="delete-btn" onclick="deleteTimeItem(this)"><i class="fas fa-trash"></i></button>
            </div>
          </div>
          <div class="time-item" data-time="16:30" draggable="true">
            <div class="custom-checkbox" onclick="toggleCheck(this)"><i class="fas fa-check"></i></div>
            <div class="time-content">
              <div class="time-title">ğŸ¢ 16:30~17:00 ì¸ í…ì¹´ì¿  ìŠ¬ë¼ì´ë”</div>
              <div class="time-description">ì§§ì€ ìŠ¤ë¦´, ì¬ë¯¸ìˆëŠ” ê²½í—˜</div>
            </div>
            <div class="edit-controls">
              <button class="edit-btn" onclick="editTimeItem(this)"><i class="fas fa-edit"></i></button>
              <button class="delete-btn" onclick="deleteTimeItem(this)"><i class="fas fa-trash"></i></button>
            </div>
          </div>
          <div class="time-item" data-time="20:30" draggable="true">
            <div class="custom-checkbox" onclick="toggleCheck(this)"><i class="fas fa-check"></i></div>
            <div class="time-content">
              <div class="time-title">ğŸŒƒ 20:30~20:50 ëˆë³´ë¦¬ ë¦¬ë²„ í¬ë£¨ì¦ˆ</div>
              <div class="time-description">ë„¤ì˜¨ì‚¬ì¸ + ë°¤ í’ê²½, ì˜¤ì‚¬ì¹´ì˜ í•˜ì´ë¼ì´íŠ¸!</div>
            </div>
            <div class="edit-controls">
              <button class="edit-btn" onclick="editTimeItem(this)"><i class="fas fa-edit"></i></button>
              <button class="delete-btn" onclick="deleteTimeItem(this)"><i class="fas fa-trash"></i></button>
            </div>
          </div>
          <button class="add-btn" onclick="addTimeItem(this)"><i class="fas fa-plus"></i> ìƒˆ ì¼ì • ì¶”ê°€</button>
          <div class="note-section">
            <div class="note-title"><i class="fas fa-star"></i> ì—¬í–‰ íŒ</div>
            <div>í—µíŒŒì´ë¸Œ ê´€ëŒì°¨ê°€ ìµœê³ ì˜ˆìš”! ì£¼ìœ íŒ¨ìŠ¤ë§Œ ìˆìœ¼ë©´ ì›¬ë§Œí•œ ê±´ ë‹¤ ì¦ê¸¸ ìˆ˜ ìˆì–´ìš”. ë°¤ ì‹œê°„ëŒ€ í™œë™ì„ ì ê·¹ ì¶”ì²œí•´ìš”!</div>
          </div>
        </div>
      </div>

      <div class="day-card" data-day-id="4">
        <div class="day-header" onclick="toggleDay(this)">
          <div>
            <div class="day-title">ğŸ›ï¸ 2025.09.12 ì˜¤ì‚¬ì¹´ ì‡¼í•‘ & ê·€êµ­</div>
            <div class="day-subtitle">ëˆí‚¤í˜¸í…Œ Â· ê¸°ë…í’ˆ Â· ì¶œêµ­</div>
          </div>
          <div class="day-toggle"><i class="fas fa-chevron-down"></i></div>
        </div>
        <div class="day-content">
          <div class="time-item" data-time="10:00" draggable="true">
            <div class="custom-checkbox" onclick="toggleCheck(this)"><i class="fas fa-check"></i></div>
            <div class="time-content">
              <div class="time-title">ğŸ›ï¸ 10:00 ëˆí‚¤í˜¸í…Œ ë‚œë°”ì </div>
              <div class="time-description">ê¸°ë…í’ˆ, ìŠ¤ë‚µ, í™”ì¥í’ˆ ì‡¼í•‘</div>
            </div>
            <div class="edit-controls">
              <button class="edit-btn" onclick="editTimeItem(this)"><i class="fas fa-edit"></i></button>
              <button class="delete-btn" onclick="deleteTimeItem(this)"><i class="fas fa-trash"></i></button>
            </div>
          </div>
          <div class="time-item" data-time="12:00" draggable="true">
            <div class="custom-checkbox" onclick="toggleCheck(this)"><i class="fas fa-check"></i></div>
            <div class="time-content">
              <div class="time-title">ğŸ¥¢ 12:00~13:30 ì ì‹¬ ì‹ì‚¬</div>
              <div class="time-description">ì˜¤ì‚¬ì¹´ í˜„ì§€ ìŒì‹ ë§›ë³´ê¸°</div>
            </div>
            <div class="edit-controls">
              <button class="edit-btn" onclick="editTimeItem(this)"><i class="fas fa-edit"></i></button>
              <button class="delete-btn" onclick="deleteTimeItem(this)"><i class="fas fa-trash"></i></button>
            </div>
          </div>
          <div class="time-item" data-time="14:00" draggable="true">
            <div class="custom-checkbox" onclick="toggleCheck(this)"><i class="fas fa-check"></i></div>
            <div class="time-content">
              <div class="time-title">ğŸ›ï¸ 14:00 ì‹ ì‚¬ì´ë°”ì‹œ ì‡¼í•‘</div>
              <div class="time-description">íŒ¨ì…˜, ì•¡ì„¸ì„œë¦¬, ê¸°ë…í’ˆ ì‡¼í•‘</div>
            </div>
            <div class="edit-controls">
              <button class="edit-btn" onclick="editTimeItem(this)"><i class="fas fa-edit"></i></button>
              <button class="delete-btn" onclick="deleteTimeItem(this)"><i class="fas fa-trash"></i></button>
            </div>
          </div>
          <div class="time-item" data-time="16:30" draggable="true">
            <div class="custom-checkbox" onclick="toggleCheck(this)"><i class="fas fa-check"></i></div>
            <div class="time-content">
              <div class="time-title">â˜• 16:30 ì¹´í˜ íœ´ì‹</div>
              <div class="time-description">ì‡¼í•‘ í›„ ì»¤í”¼/ê°„ë‹¨í•œ ë””ì €íŠ¸</div>
            </div>
            <div class="edit-controls">
              <button class="edit-btn" onclick="editTimeItem(this)"><i class="fas fa-edit"></i></button>
              <button class="delete-btn" onclick="deleteTimeItem(this)"><i class="fas fa-trash"></i></button>
            </div>
          </div>
          <div class="time-item" data-time="17:30" draggable="true">
            <div class="custom-checkbox" onclick="toggleCheck(this)"><i class="fas fa-check"></i></div>
            <div class="time-content">
              <div class="time-title">ğŸ¨ 17:30 í˜¸í…” ì²´í¬ì•„ì›ƒ</div>
              <div class="time-description">ì§ ì •ë¦¬ í›„ ê³µí•­ìœ¼ë¡œ ì´ë™</div>
            </div>
            <div class="edit-controls">
              <button class="edit-btn" onclick="editTimeItem(this)"><i class="fas fa-edit"></i></button>
              <button class="delete-btn" onclick="deleteTimeItem(this)"><i class="fas fa-trash"></i></button>
            </div>
          </div>
          <div class="time-item" data-time="19:00" draggable="true">
            <div class="custom-checkbox" onclick="toggleCheck(this)"><i class="fas fa-check"></i></div>
            <div class="time-content">
              <div class="time-title">âœˆï¸ 19:00 ê°„ì‚¬ì´ ê³µí•­ ì¶œë°œ</div>
              <div class="time-description">í•œêµ­í–‰ ë¹„í–‰ê¸° íƒ‘ìŠ¹</div>
            </div>
            <div class="edit-controls">
              <button class="edit-btn" onclick="editTimeItem(this)"><i class="fas fa-edit"></i></button>
              <button class="delete-btn" onclick="deleteTimeItem(this)"><i class="fas fa-trash"></i></button>
            </div>
          </div>
          <button class="add-btn" onclick="addTimeItem(this)"><i class="fas fa-plus"></i> ìƒˆ ì¼ì • ì¶”ê°€</button>
          <div class="note-section">
            <div class="note-title"><i class="fas fa-star"></i> ì—¬í–‰ íŒ</div>
            <div>ì‡¼í•‘ì€ ì˜¤ì „~ì˜¤í›„ ì´ˆë°˜ì— ì§‘ì¤‘í•˜ê³ , ê³µí•­ ì´ë™ ì‹œê°„ ì—¬ìœ ë¥¼ ì¶©ë¶„íˆ ì¡ìœ¼ì„¸ìš”. ê°„ì‚¬ì´ ê³µí•­ê¹Œì§€ëŠ” ë‚œë°”ì—ì„œ ì•½ 1ì‹œê°„ ì˜ˆìƒ!</div>
          </div>
        </div>
      </div>
    </div>

    <button class="add-day-btn" onclick="addNewDay()"><i class="fas fa-plus"></i> ìƒˆë¡œìš´ ì—¬í–‰ì¼ ì¶”ê°€</button>
  </div>
  
  <div id="toastMessage" class="toast"></div>

  <div id="editModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">ì¼ì • ìˆ˜ì •</div>
      <div class="form-group">
        <label>ì‹œê°„</label>
        <input type="text" id="editTime" placeholder="ì˜ˆ: 10:00 ë˜ëŠ” 10:00~11:00">
      </div>
      <div class="form-group">
        <label>ì œëª©</label>
        <input type="text" id="editTitle" placeholder="ğŸ¯ ì¥ì†Œëª… ë˜ëŠ” í™œë™">
      </div>
      <div class="form-group">
        <label>ì„¤ëª…</label>
        <textarea id="editDescription" placeholder="ìì„¸í•œ ì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš”" rows="3"></textarea>
      </div>
      <div class="modal-buttons">
        <button class="btn-cancel" onclick="closeModal()">ì·¨ì†Œ</button>
        <button class="btn-save" onclick="saveTimeItem()">ì €ì¥</button>
      </div>
    </div>
  </div>

  <div id="dayModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">ìƒˆ ì—¬í–‰ì¼ ì¶”ê°€</div>
      <div class="form-group">
        <label>ë‚ ì§œ</label>
        <input type="date" id="newDayDate" placeholder="ì˜ˆ: 2025-09-12">
      </div>
      <div class="form-group">
        <label>ì œëª©</label>
        <input type="text" id="newDayTitle" placeholder="ğŸ—¾ ë‚˜ë¼ Â· ìš°ì§€ ì¼ì •">
      </div>
      <div class="form-group">
        <label>ë¶€ì œëª©</label>
        <input type="text" id="newDaySubtitle" placeholder="ì‚¬ìŠ´ê³µì›ê³¼ ì°¨ ë¬¸í™” ì²´í—˜">
      </div>
      <div class="modal-buttons">
        <button class="btn-cancel" onclick="closeDayModal()">ì·¨ì†Œ</button>
        <button class="btn-save" onclick="saveNewDay()">ì¶”ê°€</button>
      </div>
    </div>
  </div>

  <script>
    // State Management
    let totalItems = 0;
    let completedItems = 0;
    let currentEditItem = null;
    let dayCounter = 4;
    let draggedItem = null;

    // Save and load state
    function saveState() {
      const dayCards = document.querySelectorAll('.day-card');
      const data = [];
      dayCards.forEach(card => {
        const dayData = {
          id: card.dataset.dayId,
          title: card.querySelector('.day-title').textContent,
          subtitle: card.querySelector('.day-subtitle').textContent,
          items: []
        };
        const timeItems = card.querySelectorAll('.time-item');
        timeItems.forEach(item => {
          dayData.items.push({
            time: item.dataset.time,
            title: item.querySelector('.time-title').textContent,
            description: item.querySelector('.time-description').textContent,
            checked: item.querySelector('.custom-checkbox').classList.contains('checked')
          });
        });
        data.push(dayData);
      });
      localStorage.setItem('travelData', JSON.stringify(data));
    }

    function loadState() {
      const savedData = localStorage.getItem('travelData');
      if (!savedData) return;

      const data = JSON.parse(savedData);
      const dayContainer = document.getElementById('dayContainer');
      dayContainer.innerHTML = '';
      data.forEach(day => {
        const newDayCard = createDayCard(day.id, day.title, day.subtitle);
        const dayContent = newDayCard.querySelector('.day-content');
        day.items.forEach(item => {
          const newTimeItem = createTimeItem(item.time, item.title, item.description);
          if (item.checked) {
            newTimeItem.querySelector('.custom-checkbox').classList.add('checked');
          }
          dayContent.insertBefore(newTimeItem, dayContent.querySelector('.add-btn'));
        });
        dayContainer.appendChild(newDayCard);
        dayCounter = Math.max(dayCounter, parseInt(day.id));
      });
      document.getElementById('totalDays').textContent = dayCounter;
      updateStats();
      attachDragListeners();
    }

    // Toggle Day Card Visibility
    function toggleDay(header) {
      const content = header.nextElementSibling;
      const toggle = header.querySelector('.day-toggle');
      const isExpanded = content.classList.contains('expanded');

      content.classList.toggle('expanded', !isExpanded);
      toggle.classList.toggle('rotated', !isExpanded);
      header.style.transform = 'scale(1.01)';
      setTimeout(() => header.style.transform = 'scale(1)', 200);
    }

    // Toggle Checkbox State
    function toggleCheck(checkbox) {
      const isChecked = checkbox.classList.contains('checked');
      checkbox.classList.toggle('checked', !isChecked);
      completedItems += isChecked ? -1 : 1;
      updateStats();
      saveState();
    }
    
    // Show Toast Message
    function showToast(message) {
      const toast = document.getElementById('toastMessage');
      toast.textContent = message;
      toast.classList.add('show');
      setTimeout(() => {
        toast.classList.remove('show');
      }, 2000);
    }

    // Edit Time Item
    function editTimeItem(button) {
      currentEditItem = button.closest('.time-item');
      const time = currentEditItem.getAttribute('data-time');
      const title = currentEditItem.querySelector('.time-title').textContent;
      const description = currentEditItem.querySelector('.time-description').textContent;

      document.getElementById('editTime').value = time;
      document.getElementById('editTitle').value = title;
      document.getElementById('editDescription').value = description;
      document.getElementById('editModal').style.display = 'block';
    }

    // Delete Time Item
    function deleteTimeItem(button) {
      if (confirm('ì´ ì¼ì •ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
        const timeItem = button.closest('.time-item');
        if (timeItem.querySelector('.custom-checkbox').classList.contains('checked')) {
          completedItems--;
        }
        timeItem.style.animation = 'fadeOut 0.3s ease forwards';
        setTimeout(() => {
          timeItem.remove();
          updateStats();
          saveState();
          showToast("ì¼ì •ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.");
        }, 300);
      }
    }

    // Add New Time Item
    function addTimeItem(button) {
      currentEditItem = button.closest('.day-content');
      document.getElementById('editTime').value = '';
      document.getElementById('editTitle').value = '';
      document.getElementById('editDescription').value = '';
      document.getElementById('editModal').style.display = 'block';
    }

    // Close Modal
    function closeModal() {
      document.getElementById('editModal').style.display = 'none';
      currentEditItem = null;
    }

    // Save Time Item
    function saveTimeItem() {
      const time = document.getElementById('editTime').value;
      const title = document.getElementById('editTitle').value;
      const description = document.getElementById('editDescription').value;

      if (!title.trim()) {
        alert('ì œëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        return;
      }

      if (currentEditItem?.classList.contains('time-item')) {
        currentEditItem.querySelector('.time-title').textContent = title;
        currentEditItem.querySelector('.time-description').textContent = description;
        currentEditItem.setAttribute('data-time', time);
      } else if (currentEditItem?.classList.contains('day-content')) {
        const newTimeItem = createTimeItem(time, title, description);
        const addButton = currentEditItem.querySelector('.add-btn');
        currentEditItem.insertBefore(newTimeItem, addButton);
      }
      closeModal();
      updateStats();
      saveState();
    }

    // Create Time Item
    function createTimeItem(time, title, description) {
      const div = document.createElement('div');
      div.className = 'time-item';
      div.setAttribute('data-time', time);
      div.setAttribute('draggable', 'true');
      div.innerHTML = `
        <div class="custom-checkbox" onclick="toggleCheck(this)"><i class="fas fa-check"></i></div>
        <div class="time-content">
          <div class="time-title">${title}</div>
          <div class="time-description">${description}</div>
        </div>
        <div class="edit-controls">
          <button class="edit-btn" onclick="editTimeItem(this)"><i class="fas fa-edit"></i></button>
          <button class="delete-btn" onclick="deleteTimeItem(this)"><i class="fas fa-trash"></i></button>
        </div>
      `;
      div.style.animation = 'fadeInFromBottom 0.5s ease forwards';
      return div;
    }

    // Add New Day
    function addNewDay() {
      document.getElementById('dayModal').style.display = 'block';
    }

    // Close Day Modal
    function closeDayModal() {
      document.getElementById('dayModal').style.display = 'none';
    }

    // Save New Day
    function saveNewDay() {
      const date = document.getElementById('newDayDate').value;
      const title = document.getElementById('newDayTitle').value;
      const subtitle = document.getElementById('newDaySubtitle').value;

      if (!date.trim() || !title.trim()) {
        alert('ë‚ ì§œì™€ ì œëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        return;
      }

      dayCounter++;
      const newDayCard = createDayCard(dayCounter, title, subtitle);
      document.getElementById('dayContainer').appendChild(newDayCard);
      document.getElementById('totalDays').textContent = dayCounter;
      closeDayModal();
      updateStats();
      saveState();
      attachDragListeners();
    }

    // Create Day Card
    function createDayCard(id, title, subtitle) {
      const div = document.createElement('div');
      div.className = 'day-card';
      div.setAttribute('data-day-id', id);
      div.innerHTML = `
        <div class="day-header" onclick="toggleDay(this)">
          <div>
            <div class="day-title">${title}</div>
            <div class="day-subtitle">${subtitle}</div>
          </div>
          <div class="day-toggle"><i class="fas fa-chevron-down"></i></div>
        </div>
        <div class="day-content">
          <button class="add-btn" onclick="addTimeItem(this)"><i class="fas fa-plus"></i> ìƒˆ ì¼ì • ì¶”ê°€</button>
          <div class="note-section">
            <div class="note-title"><i class="fas fa-lightbulb"></i> ì—¬í–‰ íŒ</div>
            <div>ìƒˆë¡œìš´ ì—¬í–‰ì§€ì—ì„œ ì¦ê±°ìš´ ì‹œê°„ì„ ë³´ë‚´ì„¸ìš”!</div>
          </div>
        </div>
      `;
      div.style.animation = 'fadeInFromBottom 0.5s ease forwards';
      return div;
    }

    // Update Statistics
    function updateStats() {
      totalItems = document.querySelectorAll('.time-item').length;
      completedItems = document.querySelectorAll('.custom-checkbox.checked').length;
      const progressPercent = totalItems > 0 ? Math.round((completedItems / totalItems) * 100) : 0;

      document.getElementById('totalItems').textContent = totalItems;
      document.getElementById('completedItems').textContent = completedItems;
      document.getElementById('progressPercent').textContent = `${progressPercent}%`;
      document.querySelector('.progress-fill').style.width = `${progressPercent}%`;
    }

    // Modal Close on Outside Click
    window.onclick = function(event) {
      if (event.target === document.getElementById('editModal')) closeModal();
      if (event.target === document.getElementById('dayModal')) closeDayModal();
    };

    // Dark Mode Toggle
    const modeToggle = document.getElementById('mode-toggle');
    function toggleDarkMode() {
      document.body.classList.toggle('dark-mode');
      const isDarkMode = document.body.classList.contains('dark-mode');
      modeToggle.textContent = isDarkMode ? 'â˜€ï¸' : 'ğŸŒ™';
      localStorage.setItem('darkMode', isDarkMode);
    }

    modeToggle.addEventListener('click', toggleDarkMode);

    // Drag and Drop Logic
    function attachDragListeners() {
      const timeItems = document.querySelectorAll('.time-item');
      timeItems.forEach(item => {
        item.addEventListener('dragstart', handleDragStart);
        item.addEventListener('dragover', handleDragOver);
        item.addEventListener('dragenter', handleDragEnter);
        item.addEventListener('dragleave', handleDragLeave);
        item.addEventListener('drop', handleDrop);
        item.addEventListener('dragend', handleDragEnd);
      });
    }

    function handleDragStart(e) {
      draggedItem = this;
      setTimeout(() => this.classList.add('dragging'), 0);
      e.dataTransfer.effectAllowed = 'move';
      e.dataTransfer.setData('text/html', this.innerHTML);
    }
    
    function handleDragOver(e) {
      e.preventDefault();
      e.dataTransfer.dropEffect = 'move';
      const targetItem = this;
      if (draggedItem !== targetItem && targetItem.closest('.day-content') === draggedItem.closest('.day-content')) {
        const rect = targetItem.getBoundingClientRect();
        const next = (e.clientY - rect.top) / rect.height > 0.5;
        targetItem.parentNode.insertBefore(draggedItem, next ? targetItem.nextSibling : targetItem);
      }
    }

    function handleDragEnter(e) {
      e.preventDefault();
    }
    
    function handleDragLeave() {
      // nothing needed for this example
    }
    
    function handleDrop(e) {
      e.stopPropagation();
      return false;
    }

    function handleDragEnd() {
      this.classList.remove('dragging');
      saveState();
    }

    // Initialize Page
    document.addEventListener('DOMContentLoaded', () => {
      // Load Dark Mode Preference
      const savedDarkMode = localStorage.getItem('darkMode');
      if (savedDarkMode === 'true' || (savedDarkMode === null && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
        document.body.classList.add('dark-mode');
        modeToggle.textContent = 'â˜€ï¸';
      }
      
      // Load saved state or use initial HTML
      const savedData = localStorage.getItem('travelData');
      if (savedData) {
        loadState();
      } else {
        updateStats();
        const firstCardHeader = document.querySelector('.day-card .day-header');
        if (firstCardHeader) toggleDay(firstCardHeader);
        attachDragListeners();
      }
      
      document.querySelectorAll('.time-item').forEach(item => {
        item.setAttribute('draggable', 'true');
      });
      attachDragListeners();
    });
  </script>
</body>
</html>